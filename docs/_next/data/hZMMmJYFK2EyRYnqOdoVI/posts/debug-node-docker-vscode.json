{"pageProps":{"post":{"title":"Debug Node application inside docker using vs code","date":"2020-08-04T23:45:00.000Z","slug":"debug-node-docker-vscode","author":{"name":"√Ålvaro Reis","picture":"/assets/blog/authors/alvaro.jpeg"},"content":"<h2>Motivation</h2>\n<p>No more <code>console.log</code> everywhere on the project and then remove then to commit code!\nAlso debugging we are able to get much more info about what is happening on an specific execution time\nIn the end of the day, we may investigate better and solve problems faster</p>\n<h2>Follow through the code</h2>\n<p><code>git clone git@github.com:reisneto/debug-node-docker-vscode.git</code><br>\n<a href=\"https://github.com/reisneto/debug-node-docker-vscode\">github repository</a></p>\n<h2>Configure VS Code</h2>\n<p>inside your project create the folder .vscode<br>\n<code>mkdir .vscode</code><br>\nand inside .vscode create launch.json\n<code>launch.json</code><br>\nthis file will configure how vscode will handle debugging</p>\n<h3>launch.json</h3>\n<p>In order to run the debugger with a docker container, paste the code below inside your launch.json</p>\n<pre><code class=\"language-json\">{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"node\",\n      \"request\": \"attach\",\n      \"name\": \"d: Attach to Node\",\n      \"remoteRoot\": \"/your/docker/workdir/app\",\n      \"localRoot\": \"${workspaceFolder}/app\"\n    }\n  ]\n}\n</code></pre>\n<p><strong>remoteRoot</strong> is your work directory inside docker and <strong>localRoot</strong> your local work directory. Use <code>${workspaceFolder}</code> to get the absolute path of your project</p>\n<h3>settings.json</h3>\n<p>Don't ask me why, but when the config below is true our breakpoints don't work! so make sure it false. You can create a settings.json file inside .vscode folder or change it on your vs code settings.</p>\n<pre><code class=\"language-json\">{\n  \"debug.javascript.usePreview\": false\n}\n</code></pre>\n<h3>Don't use version vs code 1.47!</h3>\n<p>The whole idea of this post is this: I spent about 2 hours to figure out my vs code version was preventing me to use debugger. Breakpoints were not working because of it, even when I put <code>debug.javascript.usePreview</code> to false!</p>\n<p>Had to downgrade to <a href=\"https://code.visualstudio.com/updates/v1_46\">version 1.46</a> to make it work.</p>\n<h3>Add inspect</h3>\n<pre><code>at package.json add --inspect to your running tool\n\n\"scripts\": {\n  \"dev\": \"ts-node-dev --inspect=0.0.0.0 -- server.ts\"\n},\n\nor\n\n\"scripts\": {\n  \"dev\": \"nodemon --inspect=0.0.0.0 server.js\"\n},\n</code></pre>\n<p><code>--inspect=0.0.0.0</code> makes it possible to listen inside docker container</p>\n<h3>That's it</h3>\n<p>I suggest to take a look into the code at the repository, any questions you can reach me out at <a href=\"mailto:reisneto.alvaro@gmail.com\">reisneto.alvaro@gmail.com</a></p>\n<hr>\n<p>special thanks to <a href=\"https://tjaddison.com/blog/2019/08/styling-markdown-tailwind-gatsby/\">this post</a> which helped me to styling my markdown -> html posts</p>\n","ogImage":{"url":"/assets/blog/dynamic-routing/cover.jpg"},"coverImage":"/assets/blog/debug-node-docker-vscode/cover.jpg"}},"__N_SSG":true}